SUBARCH_SUPPORTED = generic

MKLIBS = mklibs-copy

KERNELMAJOR = 2.6
KERNELVERSION = 3.13.0-5
KERNEL_FLAVOUR = di
KERNELIMAGEVERSION = $(KERNELVERSION)
KERNELNAME = $(foreach ver,$(KERNELVERSION),vmlinux-$(ver))

VERSIONED_SYSTEM_MAP = t

GRUB_CFG_CDROM = boot/ppc64el/grub-cdrom.cfg
GRUB_MODULES_CDROM = iso9660

arch_boot_screens:
arch_tree:

# genisoimage CD info directory, including GRUB and configuration files.
.PHONY: arch_cd_info_dir
arch_cd_info_dir:
	rm -rf $(TEMP_CD_INFO_DIR)
	mkdir -p $(TEMP_CD_INFO_DIR)/boot/grub/powerpc-ieee1275 \
		 $(TEMP_CD_INFO_DIR)/ppc/chrp

	bootvars-subst \
		KERNEL /install/vmlinux \
		INITRD /install/initrd.gz \
	< $(GRUB_CFG_CDROM) > $(TEMP_CD_INFO_DIR)/boot/grub/grub.cfg
	grub-mkimage -O powerpc-ieee1275 \
		-o $(TEMP_CD_INFO_DIR)/boot/grub/powerpc.elf \
		$(GRUB_MODULES_CDROM)
	cp -p /usr/lib/grub/powerpc-ieee1275/bootinfo.txt \
		$(TEMP_CD_INFO_DIR)/ppc/
