MEDIA_TYPE = netboot image
TARGET = $(TEMP_INITRD) $(TEMP_KERNEL) omap
EXTRANAME = $(MEDIUM)/
INITRD_FS = initramfs

MANIFEST-INITRD = "netboot initrd"
MANIFEST-KERNEL = "kernel image to netboot"

omap:
	mkdir -p $(SOME_DEST)/$(EXTRANAME)/omap
	mkimage -A arm -O linux -T kernel -C none -a 0x80008000 -e 0x80008000 -n "Ubuntu kernel" -d $(TEMP_KERNEL) $(SOME_DEST)/$(EXTRANAME)/omap/uImage
	mkimage -A arm -O linux -T ramdisk -C none -a 0x0 -e 0x0 -n "debian-installer ramdisk" -d $(TEMP_INITRD) $(SOME_DEST)/$(EXTRANAME)/omap/uInitrd
	update-manifest $(SOME_DEST)/$(EXTRANAME)/omap/uImage "Linux kernel for OMAP Boards"
	update-manifest $(SOME_DEST)/$(EXTRANAME)/omap/uInitrd "initrd for OMAP Boards"

