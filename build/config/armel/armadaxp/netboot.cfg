MEDIA_TYPE = netboot image
TARGET = $(TEMP_INITRD) $(TEMP_KERNEL) armadaxp
INITRD_FS = initramfs

MANIFEST-INITRD = "netboot initrd"
MANIFEST-KERNEL = "kernel image to netboot"

armadaxp:
	mkdir -p $(SOME_DEST)/$(EXTRANAME)/
	mkimage -A arm -O linux -T kernel -C none -a 0x02000000 -e 0x8000 -n "Debian kernel" -d $(TEMP_KERNEL) $(SOME_DEST)/$(EXTRANAME)/uImage
	mkimage -A arm -O linux -T ramdisk -C gzip -a 0x20000000 -e 0 -n "debian-installer ramdisk" -d $(TEMP_INITRD) $(SOME_DEST)/$(EXTRANAME)/uInitrd
	update-manifest $(SOME_DEST)/uImage "Linux kernel for Marvell ArmadaXP"
	update-manifest $(SOME_DEST)/uInitrd "initrd for Marvell ArmadaXP"

